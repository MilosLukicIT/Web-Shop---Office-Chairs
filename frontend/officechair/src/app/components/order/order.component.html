<section class="page-section" id="add-provider-form">
  <div class="container col-md-6 mainDiv">
    <div class="row justify-content-center">
      <div class="col-lg-8 text-center">
        <h2 *ngIf="!submitted" class="mt-0">Vaša korpa</h2>
        <hr class="divider my-4">
      </div>
    </div>
    <div class="row justify-content-center">

      <div class="row o-hidden border-0">
        <div class="col-lg-12 text-center">
          <div style="text-align: center;">
            <div *ngIf="submitted" style="margin-bottom: 65%;">
              <h1 class="mt-0 text-success" *ngIf="submitted">Vaša prudžbina je primljena i sprema se!</h1>
            </div>
          </div>

          
          <p class="mt-0 alert alert-danger" *ngIf="emailError">
            Info: {{emailErrorMsg}}
          </p>
          <form [formGroup]="orderForm" class="user" action="/products/add-order" method="post" *ngIf="!submitted"
            (ngSubmit)="handleSubmit()">
            <div class="form-group row">
              <div class="col-sm-6 mb-3 mb-sm-0">
                <label for="address">Adresa</label>
                <input type="text" class="form-control form-control-user" formControlName="address" required>
                <span class="text-danger" *ngIf="address && address.errors?.['required'] && address.touched">Potrebna je
                  adresa</span>
              </div>
              <div class="col-sm-6">
                <label for="contact">Kontakt telefon</label>
                <input type="text" class="form-control form-control-user" formControlName="contact"  required>
                <span class="text-danger" *ngIf="contact && contact.errors?.['required'] && contact.touched">Potreban je
                  kontakt telefon</span>
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-12 mb-3 mb-sm-0">
                <label for="inputUserInfo"></label>
                <div class="col-sm-12">
                  <div class="card" style="margin-left: 25%; margin-right: 25%;">
                    <div class="card-body">
                      <h5 class="card-title">Kontak informacije</h5>
                      <p *ngIf="currentUser != null" class="card-text">{{currentUser.name}}  
                        {{currentUser.surname}} <br>
                        {{currentUser.email}}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-12" style="margin-top: 15px;margin-bottom: 15px;">
                <div class="card col-md-3" style="margin-left: 38%; margin-right: 25%; height: 100px;">
                  <div class="card-body">
                    <h5 class="card-title">Račun</h5>
                    <p class="card-text">{{total}}.00rsd <br><br><br></p>

                  </div>
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table table-hover table-bordered">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">Artikl</th>
                    <th scope="col">Cena</th>
                    <th scope="col">Količina</th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngFor="let item of orderItems">
                    <tr *ngIf="item.amountOfArticle > 0">
                      <td scope="row">{{ item.article.nameOfArticle }}, {{item.article.articleType.nameOfType}}</td>
                      <td scope="row">{{ item.article.priceOfArticle }}</td>
                      <td scope="row">{{ item.amountOfArticle }}</td>
                      <td scope="row"><button type="button" class="btn btn-danger"
                          (click)="removeItem(item.article.articleId)">-</button></td>
                    </tr>
                  </ng-container>

                </tbody>
              </table>
            </div>
            <button [disabled]="orderForm.invalid || cartService.itemsCount() == 0 "
              class="btn btn-primary btn-lg btn-block" type="submit"
              style="margin-top: 25px; margin-bottom: 10px;">Poruči</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>